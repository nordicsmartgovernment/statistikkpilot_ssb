<!DOCTYPE html>
<html lang="no">
    <head>
        <title>Pilot: Rapportering til SSB basert på SAF-T</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="css/style.css" rel="stylesheet">
        <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
        <script defer src="https://pyscript.net/latest/pyscript.min.js"></script>

    </head>
    <body>
        <py-config>
        packages = ["pandas"]  

        [[fetch]]
        #from = "static/python/"
        files = ["saft2dataframe.py", "request.py"]
          
    
        </py-config>

        <py-script src="main.py">
        </py-script>

    <header>
<img src="https://nordicsmartgovernment.org/themes/custom/newerst/lbe/Nordic_Smart_Government_and_Business_logo.svg" alt="Nordic smart government and Business logo" width="103" height="40">
<h1>Pilot: Rapportering til SSB basert på SAF-T</h1>
    </header>

    <main>

    
    <article id="intro">
    <h1>Introduksjon</h1>
    <p>Dette er en pilot for å forenkle rapporteringen til SSB. Den dekker i første omgang rapportering til
    <a href="https://www.ssb.no/varehandel-og-tjenesteyting/varehandel/statistikk/varehandelsindeksen">varehandelsindeksen</a>.
    Istedenfor å finne de relevante omsetningstallene manuelt, inneholder denne siden kode som kan hente de relevante tallene
    fra en oppdatert SAF-T-fil. Følg instruksjonene under.</p>
    <p>Du kan også skru på et eget Python-vindu for å kjøre kode du skriver selv: 
</p>
    <py-script>
    def display_debug():
        el = Element('debug')
        el.remove_class('hidden')
        el = Element('debug_respons')
        el.clear()
        display('Python-vindu vises nå nederst på siden.', target="debug_respons")
    
    def skjul_debug():
        el = Element('debug')
        el.add_class('hidden')
        el = Element('debug_respons')
        el.clear()

    </py-script>
    <button id="display_debug" py-onClick="display_debug()">Vis Python-vindu</button>  <button id="skjul_debug" py-onClick="skjul_debug()">Skjul Python-vindu</button>

    <div id="debug_respons"></div>
    </article>


    <article id="a1">
    <h1>Steg 1: Velg SAF-T-fil</h1>
    <p>Eksporter en SAF-T-fil fra regnskapssystemet. Bokføringen må være oppdatert for perioden det skal rapporteres for.</p>
    <p><strong>Merk at filen <em>ikke</em> blir sendt/overført til noen andre.</strong>
    Du kan verifisere dette selv ved å skru på flymodus/trekke ut nettverkskabelen, før du velger en fil. Analysen av SAF-T-filen vil fungere ettersom den relevante koden
    allerede er lastet ned.</p>
    <p style="font-size: small">Bruk <a href="https://raw.githubusercontent.com/Skatteetaten/saf-t/master/Example%20Files/ExampleFile%20SAF-T%20Financial_999999999_20161125213512.xml">
    denne filen</a> hvis du ikke har en SAF-T fil og vil teste funksjonene på denne siden. Merk at testfilen kun inneholder data for 2017.</p>
    <label for="saftfil">Velg fil:</label>
    <input type="file" id="saftfil" name="saftfil"/>

    <p id="resultat_a1" class="resultat">
    </p>
    </article>

    <article id="a2" class="hidden">
    <h1>Steg 2: Velg rapporteringsperiode</h1>
    <p></p>
    <py-script>
    </py-script>
        
    </article>

    <article id="a3" class="hidden">
    <h1>Steg 3: Kjør analysen og verifiser resultatet</h1>
    <p></p>
    <py-script>
    </py-script>
        
    </article>

    <article id="a4" class="hidden">
    <h1>Steg 4: Send inn tallene til SSB</h1>
    <p></p>
    <py-script>
    </py-script>
        
    </article>

    <article id="debug" class="hidden">
    <h1>Debug: Her kan du kjøre egen kode</h1>
    <p>Bruk den såkalte REPL nedenfor for å kjøre egen kode. Dataene fra SAF-T-fila er tilgjengelige i variabelen <code>saft</code></p>
    <py-repl auto-generate="true">
    # kjør denne cellen (Shift-Enter) og få liste over kolonnene
    # NB! Hvis du ikke har åpnet en SAF-T fil ennå er listen over kolonner tom
    saft.columns
    </py-repl>
        
    </article>

    </main>
    
    </body>
</html>